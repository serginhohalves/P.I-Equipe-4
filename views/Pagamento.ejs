<!DOCTYPE html>
<html lang="pt-br">

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/Sacola.css">
    <title>Tela de Pagamento</title>
</head>

<body>
    <script>
        function getItensFromStorage(){
           let listaDeProdutos = localStorage.getItem('listaProdutos')
           let array = JSON.parse(listaDeProdutos)
           return array
        }

        function deleteItem(id){
            let itens = getItensFromStorage()
            const novoArray = itens.filter(item => {
               return item.id !== id
            })
            localStorage.setItem('listaProdutos', JSON.stringify(novoArray))   
        }
    
        function createElements(){
            let listaDeProdutos = getItensFromStorage()
          const li = document.querySelector('.catalogo');
          
          
            for(let i= 0; i<  listaDeProdutos.length; i++){
            const externalHTML = `<div>
            <p>${listaDeProdutos[i].nome}</p> 
            <img src=${listaDeProdutos[i].imagem_produto}>            
            <p>${listaDeProdutos[i].categoria}</p>
            <p> R$${listaDeProdutos[i].valor},00</p>
            <button class="btn-deletar" onclick=deleteItem(${listaDeProdutos[i].id})>Deletar produto </button>
            <div>`
            li.innerHTML += externalHTML
           } 
        }
       
    </script>
    <%-  include('partials/header.ejs'); %>  
    <main>
        <button onclick=createElements()>Carrinho de compras</button>
        <div class="catalogo">
        </div>
        <button class="btn">Finalizar compra</button>
        
            <div>
                <h3>Carrinho de Compras</h3>
            </div>

            <p class="b">Editar sacola</p>
            </div>
            <div class="container2">
                <p class="c">Resumo do pedido</p>
            </div>
        </section>
        <section>
            <p class="d">Alterar endereço</p>
            </div>
            <div class="container3">
                <p class="e">Endereço</p>
            </div>
        </section>
        
    </main>

    
        <div class="footer">
            <div class="p-footer">
                <ul>
                    <li><img src="../img/Customer Support.svg">SAC</li>
                    <li><img src="../img/WhatsApp.svg">Compre pelo chat online</li>
                    <li><img src="../img/Encrypt.svg">Certificado de segurança</li>
                </ul>
                <p class="f">Preços e condições de pagamento exclusivos para compras via internet, podendo variar nas
                    lojas físicas.<br>
                    Ofertas válidas na compra de até 10 peças de cada produto por cliente, até o término dos nossos
                    estoques para internet.<br>
                    Caso os produtos apresentem divergências de valores, o preço válido é o da Sacola de compras.<br>
                    Vendas sujeitas a análise e confirmação de dados.
                </p>
                <p class="g">Rua das Creolas 456 - CEP - 50000-000 Centro Recife - PE CNPJ: 01987456/0001-02</p>
            </div>
        </div>
        </div>

        <%-  include('partials/footer.ejs'); %>
</body>

</html>